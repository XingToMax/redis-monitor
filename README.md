# redis-monitor
> 基于软件杯赛题缓存高可用产生的代码，用于解决redis节点状态监控，以及故障恢复、主从切换

### 赛题描述

现有两台物理机器，分别部署若干个redis节点(测试程序要求提供两个节点)，测试流程包括:
1. 插入数据
2. A机器掉电
3. B机器提供服务
4. A机器1分钟内自动恢复服务
5. B机器掉电
6. A机器提供服务
7. B机器1分钟内自动恢复服务
8. 测试结束
(过程中应保证服务正常即插入、查询等操作无故障且数据不丢失)

### 基本架构

基于两台机器，采用主从架构，设置一主一从两个redis节点分别部署于A、B机器，初始设置A机器节点为master，B机器节点为slave

### 主从切换

主从切换可以考虑添加redis哨兵进行，但由于只有两台机器可以进行相应环境部署，哨兵部署受限且难以获得一个相对理想的方案，节点数较少可以考虑自己实现监视器完成相应的功能。

1. 支持开机自启
2. 需配置节点
3. 监听节点状况
4. master节点故障，选出新的master节点(这里仅切换到另一存活节点)
5. 故障节点恢复，调整其为slave节点
